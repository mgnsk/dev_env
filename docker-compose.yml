version: "2.4"

services:
  dev-env:
    image: mgnsk/dev-env
    hostname: dev-env
    # Use full resources for earlyoom to work correctly.
    #cpus: 2.0
    #mem_limit: 2G
    #mem_reservation: 1G
    #memswap_limit: 4G
    #mem_swappiness: 0
    environment:
      # User and group are created on entry if /asuser entrypoint is used.
      - UID=5000
      - USER=devuser
      - GID=6000
      - GROUP=devgroup
    build:
      context: ./image
      target: dev-env
      args:
      - dot_url
      - dot_commit
    volumes:
      - ./code:/code

